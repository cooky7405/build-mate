# 빌딩메이트 - 구현된 기능 목록

이 문서는 빌딩메이트 프로젝트에서 현재까지 구현된 기능들을 정리하여 기록합니다. 각 기능의 현재 상태와 주요 구현 내용을 포함합니다.

최종 업데이트: 2025년 5월 17일

## 1. 코어 인프라 및 기본 설정

### 1.1 프로젝트 설정

- [x] Next.js 15.3.1 기반 프로젝트 구조 설정
- [x] TypeScript 설정 및 타입 시스템 구축
- [x] Tailwind CSS 설정 및 디자인 시스템 구축
- [x] Prisma ORM 설정 및 데이터베이스 연결
- [x] API 라우트 기본 구조 설정

### 1.2 인프라

- [x] SQLite 데이터베이스 설정 (개발용)
- [x] Prisma 스키마 정의 및 마이그레이션
- [x] 시드 데이터 설정 (사용자, 건물, 업무 템플릿, 업무)

## 2. 사용자 및 인증 관리

### 2.1 사용자 관리

- [x] 사용자 데이터 모델 구현 (User)
- [x] 다양한 사용자 권한 설정 (SUPER_ADMIN, BUILDING_ADMIN, ADMIN_MANAGER, BIZ_MANAGER, BUILDING_MANAGER, USER)
- [x] 사용자 시드 데이터 생성

### 2.2 인증 시스템

- [ ] 로그인 페이지 구현
- [ ] 인증 미들웨어 구현
- [ ] 세션 및 쿠키 관리
- [ ] 비밀번호 암호화 처리 (bcrypt)

## 3. 건물 관리 기능

### 3.1 건물 데이터 관리

- [x] 건물 데이터 모델 구현 (Building)
- [x] 건물 CRUD API 구현
  - [x] 건물 목록 조회 API (`GET /api/buildings`)
  - [x] 건물 상세 조회 API (`GET /api/buildings/[id]`)
  - [x] 건물 생성 API (`POST /api/buildings`)
  - [x] 건물 수정 API (`PUT /api/buildings/[id]`)
  - [x] 건물 삭제 API (`DELETE /api/buildings/[id]`)
- [x] 건물 필터링 및 검색 기능 구현

### 3.2 건물 관리자 연결

- [x] 건물과 관리자 연결 데이터 모델 구현
- [x] 건물별 관리자 할당 및 조회 기능
- [x] 관리 책임자, 경영 책임자 구분 및 할당 기능

## 4. 업무 관리 기능

### 4.1 업무 템플릿 관리

- [x] 업무 템플릿 데이터 모델 구현 (TaskTemplate)
- [x] 업무 템플릿 CRUD API 구현
- [x] 업무 우선순위, 카테고리, 담당자 유형 설정 기능
- [x] 업무 템플릿 통계 API 구현 (`GET /api/tasks/templates/stats`)
- [x] 업무 템플릿 상세 페이지 구현
  - [x] 템플릿 기본 정보 표시
  - [x] 업무 현황 요약 대시보드 (전체/완료/진행 중인 업무, 적용된 빌딩 수)
  - [x] 전체 완료율 시각화
  - [x] 탭 인터페이스 (전체 현황, 미완료 빌딩, 완료 빌딩)
- [x] 업무 템플릿 현황 페이지 개선
  - [x] 템플릿 목록 클릭 시 상세 페이지 이동 기능
  - [x] 이벤트 버블링 방지 처리
  - [x] 버튼 텍스트 명확화 ("업무 상태 관리" → "템플릿 상세 보기")

### 4.2 업무 할당 및 관리

- [x] 업무 데이터 모델 구현 (Task)
- [x] 업무 상태 관리 (PENDING, IN_PROGRESS, COMPLETED, DELAYED, CANCELLED)
- [x] 업무 완료 보고서 데이터 모델 구현 (TaskCompletionReport)
- [x] 업무 완료 처리 및 보고서 연결 기능
- [x] 여러 건물에 동시에 업무 할당 기능 구현
- [x] 모든 건물에 한 번에 업무 할당 기능 구현
- [x] 업무 템플릿 유형에 따른 담당자 자동 할당 기능 구현 (ADMIN, BIZ, BOTH)
- [x] 업무 목록 UI 개선
  - 최근 생성된 업무 표시 (24시간 이내)
  - 템플릿별 필터 기능 추가
  - 탭 인터페이스로 모든 업무/최근 업무 구분
- [x] 업무 추가 페이지 UI/UX 개선
  - 대량의 건물(500개+) 선택을 위한 검색 가능한 드롭다운 구현
  - 건물 카테고리별 필터링 기능 추가
  - 선택된 건물에 대한 뱃지 UI 구현 및 개별 제거 기능
  - 건물 선택 방식 개선 (기존 그리드 방식에서 검색 가능한 드롭다운으로 변경)
  - 전체 페이지 UI 구조화 및 섹션 분리로 가독성 향상
- [x] 업무 템플릿 추가와 업무 추가 기능 통합
  - 업무 템플릿 페이지에서 "새 템플릿 추가" 버튼을 "업무 추가"로 변경
  - 빌딩 상세 페이지에서 업무 추가 시 해당 빌딩이 URL 쿼리 파라미터로 전달되도록 구현
  - 하나의 페이지(`/tasks/new`)에서 템플릿 추가 모드와 업무 추가 모드 전환 기능 구현
  - 템플릿 생성 후 바로 해당 템플릿을 선택하여 업무 추가 가능한 플로우 구현

## 5. 대시보드 기능

### 5.1 회사 대표 대시보드

- [x] 기본 대시보드 UI 구현
- [x] 건물 통계 표시 (총 건물 수)
- [x] 최신 업무 템플릿 목록 표시
- [x] 업무 템플릿별 총 업무 및 완료된 업무 수 통계 표시
- [x] 업무 진행률 시각화
- [x] 업무 템플릿 현황 섹션 개선
  - [x] 각 템플릿 항목 클릭 시 템플릿 상세 페이지로 이동 기능 추가
  - [x] 링크 텍스트 명확화 ("모두 보기" → "업무 템플릿 현황 보기")

### 5.2 통계 및 데이터 시각화

- [x] 업무 진행률 표시 바 구현
- [ ] 건물별 재무 상태 차트
- [ ] 월별 수익 추이 차트
- [ ] 알림 및 리포트 섹션

## 6. UI/UX 구현

### 6.1 공통 컴포넌트

- [x] 상단 네비게이션 바 (NavBar) 구현
- [x] 사이드바 메뉴 구현
- [x] 모바일 반응형 메뉴 구현
- [x] 로딩 상태 표시 스켈레톤 UI 구현

### 6.2 페이지 레이아웃

- [x] 레이아웃 구조 설정 (app/layout.tsx)
- [x] 반응형 디자인 적용 (모바일, 데스크탑)
- [x] 다크 모드 지원 스타일링

### 6.3 페이지별 UI/UX 설계 문서

- [x] 페이지별 UI/UX 상세 설계 문서 작성 (doc/ui-ux-design-by-page.md)
  - [x] 각 페이지의 목적, 주요 UI 구성요소, 상호작용 패턴 정의
  - [x] 로딩 상태, 모바일 최적화, 접근성 고려사항 등 상세 명세
  - [x] 대시보드, 업무 관리, 빌딩 관리 페이지 등 주요 페이지 문서화
  - [x] ASCII 다이어그램을 활용한 화면 레이아웃 구성도 추가
    - CEO 대시보드, 빌딩 관리자 대시보드
    - 업무 템플릿 현황, 업무 템플릿 상세 페이지
    - 빌딩 목록 및 상세 페이지 레이아웃 시각화

## 7. 기타 기능

### 7.1 데이터 포맷팅 및 유틸리티

- [x] 날짜 포맷팅 함수 구현
- [x] 상태별 색상 코드 시스템 구현
- [x] 에러 처리 및 로깅 시스템

## 8. 개발 중인 기능

### 8.1 관리비 시스템

- [ ] 관리비 모듈 설계
- [ ] 관리비 계산 로직 구현
- [ ] 관리비 청구 및 납부 관리 기능

### 8.2 입주사 관리

- [ ] 입주사 데이터 모델 구현
- [ ] 입주사 CRUD 기능 구현
- [ ] 계약 관리 기능 구현

## 9. 알려진 이슈 및 개선 필요 사항

1. Next.js 15.3.1에서 params, searchParams 등의 API가 Promise로 변경됨에 따른 타입 호환성 문제

   - 해결 방법: React.use() 또는 await를 사용하여 값을 가져오도록 수정 필요
   - 관련 파일: app/api/buildings/[id]/route.ts

2. 대시보드 차트 시각화 구현 필요

   - 현재 차트 자리 표시자만 구현되어 있음
   - 실제 데이터를 기반으로 한 차트 구현 필요

3. 인증 시스템 구현 필요
   - 현재 인증 없이 모든 API 접근 가능
   - 권한별 접근 제어 필요

## 10. 다음 구현 계획

1. 인증 시스템 구현 (로그인, 세션 관리)
2. 사용자 권한별 API 접근 제어 기능
3. 대시보드 차트 데이터 시각화 구현
4. 업무 관리 페이지 UI 구현
5. 알림 시스템 구현

## 빌딩 관리자 관리 기능

### 기능 개요

- 빌딩의 관리 책임자(adminManager)와 경영 책임자(bizManager)를 추가, 변경, 삭제할 수 있는 기능
- 사용자 검색 기능을 통해 적절한 역할을 가진 사용자를 검색하고 선택할 수 있음

### 기술 스택

- React 상태 관리 (useState, useEffect)
- 사용자 검색 API (디바운싱 적용)
- 권한 기반 UI 표시

### 사용자 경험

- 필터링된 검색 결과를 통해 원하는 관리자를 빠르게 찾을 수 있음
- 관리자 프로필 이미지, 이름, 이메일, 역할 정보 표시
- 모달 UI를 통한 직관적인 사용자 선택 경험

### API 엔드포인트

- GET `/api/buildings/[id]/managers`: 빌딩의 관리자 정보 조회
- PUT `/api/buildings/[id]/managers`: 빌딩의 관리자 정보 업데이트
- GET `/api/users/search?q=[검색어]`: 사용자 검색 API

### 권한 제어

- SUPER_ADMIN, BUILDING_ADMIN 역할을 가진 사용자만 관리자 변경 가능
- 적절한 역할을 가진 사용자만 선택 가능 (adminManager는 ADMIN_MANAGER 또는 더 높은 권한, bizManager는 BIZ_MANAGER 또는 더 높은 권한)
